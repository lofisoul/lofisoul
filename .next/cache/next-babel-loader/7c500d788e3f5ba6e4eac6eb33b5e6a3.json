{"ast":null,"code":"var _jsxFileName = \"/Users/jasonnolfi/lofisoul/components/SCList.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { scAppId, scUser } from '../config';\nimport { shuffle } from '../lib/utils';\n\nclass SCList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      isFetching: false,\n      fiveTracks: null,\n      randomTracksFromUsers: null\n    });\n\n    _defineProperty(this, \"initTrack\", async () => {\n      //initialize SC\n      this.setState({\n        isFetching: true\n      });\n      const response = await SC.get(`/users/${scUser.id}/favorites`, {\n        limit: 1000,\n        linked_partitioning: 1\n      });\n      const sortedTracks = shuffle(response.collection, 5); //run logic for getting random song based on users that liked 5 sorted tracks\n\n      let randomPlaylist = await Promise.all(sortedTracks.map(async item => {\n        let newItem = await this.generateRandomPlaylist(item);\n        return newItem;\n      }));\n      this.setState({\n        isFetching: false,\n        fiveTracks: sortedTracks,\n        randomTracksFromUsers: randomPlaylist\n      });\n      const track = response.collection[27];\n      const trackSrc = `${track.stream_url}?client_id=${scAppId}`;\n      this.audio = new Audio();\n      this.audio.crossOrigin = \"anonymous\";\n      this.audio.src = trackSrc;\n      this.context = new (window.AudioContext || window.webkitAudioContext)();\n      this.source = this.context.createMediaElementSource(this.audio);\n      this.analyser = this.context.createAnalyser();\n      this.source.connect(this.analyser);\n      this.analyser.connect(this.context.destination);\n      this.frequency_array = new Uint8Array(this.analyser.frequencyBinCount);\n    });\n\n    _defineProperty(this, \"generateRandomPlaylist\", async track => {\n      const usersWhoLiked = await SC.get(`/tracks/${track.id}/favoriters`, {\n        limit: 1000,\n        linked_partitioning: 1\n      });\n      let userArr = usersWhoLiked.collection;\n      const arrayUsersFaves = userArr.filter(user => user.public_favorites_count > 0); //sort users without playlists\n\n      const randomUser = shuffle(arrayUsersFaves, 1)[0]; //get first list of random users\n\n      const userFaves = await SC.get(`/users/${randomUser.id}/favorites`, {\n        limit: 1000,\n        linked_partitioning: 1\n      });\n      const randomTrack = shuffle(userFaves.collection, 1)[0];\n      const randomObj = {\n        referral: track,\n        user: randomUser,\n        track: randomTrack\n      };\n      return randomObj;\n    });\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      SC.initialize({\n        client_id: scAppId,\n        redirect_uri: 'http://jambox.thatdudeartoo.com/callback.html'\n      });\n      this.initTrack();\n    });\n  }\n\n  render() {\n    const {\n      isFetching,\n      fiveTracks,\n      randomTracksFromUsers\n    } = this.state;\n\n    if (isFetching) {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 20\n        }\n      }, \"Fetching...\");\n    }\n\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      style: {\n        borderBottom: '1px solid gray',\n        paddingBottom: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, fiveTracks ? fiveTracks.map(track => {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 28\n        }\n      }, __jsx(\"p\", {\n        key: track.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 33\n        }\n      }, __jsx(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 51\n        }\n      }, track.user.username), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 89\n        }\n      }), \": \", track.title), __jsx(\"iframe\", {\n        width: \"100%\",\n        height: \"300\",\n        scrolling: \"no\",\n        frameborder: \"no\",\n        allow: \"autoplay\",\n        src: `https://w.soundcloud.com/player/tracks/${track.id}&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }));\n    }) : ''), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, randomTracksFromUsers ? randomTracksFromUsers.map(item => {\n      return __jsx(\"div\", {\n        key: item.track.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 28\n        }\n      }, __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }, __jsx(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 28\n        }\n      }, \"User:\"), \" \", item.user.username), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      }, \"Song: \", item.track.title), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, \"Referral: \", item.referral.title), __jsx(\"iframe\", {\n        width: \"100%\",\n        height: \"300\",\n        scrolling: \"no\",\n        frameborder: \"no\",\n        allow: \"autoplay\",\n        src: `https://w.soundcloud.com/player/tracks/${item.id}&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }));\n    }) : 'Error'));\n  }\n\n}\n\nexport default SCList;","map":{"version":3,"sources":["/Users/jasonnolfi/lofisoul/components/SCList.js"],"names":["React","Component","styled","scAppId","scUser","shuffle","SCList","isFetching","fiveTracks","randomTracksFromUsers","setState","response","SC","get","id","limit","linked_partitioning","sortedTracks","collection","randomPlaylist","Promise","all","map","item","newItem","generateRandomPlaylist","track","trackSrc","stream_url","audio","Audio","crossOrigin","src","context","window","AudioContext","webkitAudioContext","source","createMediaElementSource","analyser","createAnalyser","connect","destination","frequency_array","Uint8Array","frequencyBinCount","usersWhoLiked","userArr","arrayUsersFaves","filter","user","public_favorites_count","randomUser","userFaves","randomTrack","randomObj","referral","initialize","client_id","redirect_uri","initTrack","render","state","borderBottom","paddingBottom","username","title"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport {scAppId, scUser} from '../config';\nimport {shuffle} from '../lib/utils';\n\nclass SCList extends Component {\n    state = {\n        isFetching: false,\n        fiveTracks: null,\n        randomTracksFromUsers: null\n    }\n    \n    initTrack = async () => {\n        //initialize SC\n        this.setState({isFetching:true})\n        \n        const response = await SC.get(`/users/${scUser.id}/favorites`,{\n            limit:1000,\n            linked_partitioning:1\n        })\n\n        const sortedTracks = shuffle(response.collection,5);\n\n        //run logic for getting random song based on users that liked 5 sorted tracks\n        let randomPlaylist = await Promise.all(sortedTracks.map(async(item) => {\n            \n            let newItem = await this.generateRandomPlaylist(item);\n            return newItem\n        }))\n        \n        \n        \n        this.setState({isFetching:false, fiveTracks:sortedTracks, randomTracksFromUsers: randomPlaylist})\n        const track = response.collection[27];\n        const trackSrc = `${track.stream_url}?client_id=${scAppId}`;\n        this.audio = new Audio();\n        this.audio.crossOrigin = \"anonymous\";\n        this.audio.src = trackSrc;\n        this.context = new (window.AudioContext || window.webkitAudioContext)();\n        this.source = this.context.createMediaElementSource(this.audio);\n\n        this.analyser = this.context.createAnalyser();\n        this.source.connect(this.analyser);\n        this.analyser.connect(this.context.destination);\n        this.frequency_array = new Uint8Array(this.analyser.frequencyBinCount);        \n    }\n\n    generateRandomPlaylist = async (track) => {\n        const usersWhoLiked = await SC.get(`/tracks/${track.id}/favoriters`,{\n            limit: 1000,\n            linked_partitioning:1\n        })\n \n        let userArr = usersWhoLiked.collection;\n        const arrayUsersFaves = userArr.filter(user=> user.public_favorites_count>0)\n        //sort users without playlists\n        const randomUser = shuffle(arrayUsersFaves,1)[0];\n        //get first list of random users\n        const userFaves = await SC.get(`/users/${randomUser.id}/favorites`,{\n            limit: 1000,\n            linked_partitioning:1\n        });\n        const randomTrack = shuffle(userFaves.collection,1)[0];\n        const randomObj = {\n            referral: track,\n            user: randomUser,\n            track: randomTrack\n        }\n        return randomObj\n    }\n\n    componentDidMount = () => {\n        SC.initialize({\n            client_id: scAppId,\n            redirect_uri: 'http://jambox.thatdudeartoo.com/callback.html'\n        });\n        this.initTrack();\n    }\n    render() {\n        const {isFetching, fiveTracks, randomTracksFromUsers} = this.state;\n        if(isFetching) {\n            return <div>Fetching...</div>\n         }\n        return (\n            <div>\n                <div style={{borderBottom: '1px solid gray', paddingBottom: '20px'}}>\n                {(fiveTracks) ? fiveTracks.map(track=>{\n                    return <div><p key={track.id}><strong>{track.user.username}</strong><br/>: {track.title}</p>\n                    <iframe width=\"100%\" height=\"300\" scrolling=\"no\" frameborder=\"no\" allow=\"autoplay\" src={`https://w.soundcloud.com/player/tracks/${track.id}&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`}></iframe>\n                    </div>\n                }) : ''}\n                </div>\n                <div>\n                {(randomTracksFromUsers) ? randomTracksFromUsers.map(item=>{\n                    return <div key={item.track.id}>\n                        <p><strong>User:</strong> {item.user.username}</p>\n                        <p>Song: {item.track.title}</p>\n                        <p>Referral: {item.referral.title}</p>\n                        <iframe width=\"100%\" height=\"300\" scrolling=\"no\" frameborder=\"no\" allow=\"autoplay\" src={`https://w.soundcloud.com/player/tracks/${item.id}&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true`}></iframe>\n                    </div>\n                }) : 'Error'}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default SCList;"]},"metadata":{},"sourceType":"module"}